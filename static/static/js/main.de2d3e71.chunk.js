(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1480:function(e,t,n){},1503:function(e,t,n){},1504:function(e,t,n){},1508:function(e,t,n){},1509:function(e,t,n){},1510:function(e,t,n){},1511:function(e,t,n){},1515:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(25),c=n.n(i),s=(n(55),n(56),n(19)),l=n(8),o=(n(57),n(6)),u=n.n(o),d=n(10),j=n(20),b=n(45),p=n(21),h=n(23),O=n(26),f=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),x=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),m=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),v=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),g=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),y=n(59)(a.a),w=n(3),S={username:"Aron",token:"aabbcc",uid:66,clientId:"exampleclientId",favorites:[],accountType:"external"},k=function(e){for(var t=[],n=0;n<e;n++)t.push({id:n,poster:S.uid,title:w.name.jobTitle(),description:w.lorem.paragraphs(3),clientId:w.company.companyName(),type:w.random.arrayElement(["internal","external"]),timePosted:w.date.recent(),applications:[{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"rifiutato",applicantType:w.random.arrayElement(["internal","external"])},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"ricevuto",applicantType:w.random.arrayElement(["internal","external"])},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"review",applicantType:w.random.arrayElement(["internal","external"])},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"confermato",applicantType:w.random.arrayElement(["internal","external"])},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"ricevuto",applicantType:w.random.arrayElement(["internal","external"])}]});return t},N={currentUser:S,callBuilder:k,applicationBuilder:function(e){for(var t=[],n=0;n<e;n++)t.push({applicantId:w.random.number(),applicantName:w.name.firstName(),applicationStatus:w.random.arrayElement(["ricevuto","confermato","rifiutato","review"]),id:w.random.number(),timeApplied:w.date.recent(),applicantSeniority:w.random.arrayElement(["junior","senior"]),target:k(1)[0]});return t}},C=function(e,t){switch(console.log(e),e){case"invalid_json":t(new v(e));break;case"existing_username":t(new v("username_taken"));break;case"server_failure":t(new g(e));break;case"no_token":t(new x(e));break;case"wrong_credentials":t(new m(e));break;case"token_expired":t(new x(e));break;case"must_be_post":throw new g("This should never emerge in prod. \n        There is a GET request that should be POST.")}},E=n(4),P=(n(1480),n(0));var A=function(e){var t,n=Object(r.useState)("signin"),a=Object(E.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(""),l=Object(E.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(E.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)("internal"),O=Object(E.a)(h,2),f=O[0],x=O[1],m=Object(r.useState)(),v=Object(E.a)(m,2),g=v[0],y=v[1],w=function(t){t.preventDefault(),e.setUsernameAndPassword({username:o,password:b})},S=function(t){t.preventDefault(),e.registerWithUsernameAndPassword({username:o,password:b,type:f,clientId:g})};return t="signin"===i?Object(P.jsxs)("div",{className:"main",children:[Object(P.jsx)("h1",{className:"text-center",children:"Accedi"}),e.errorMessage&&Object(P.jsx)("div",{className:"alert alert-danger",children:e.errorMessage}),Object(P.jsxs)("form",{onSubmit:"signin"===i?w:S,children:[Object(P.jsxs)("label",{htmlFor:"username",children:[Object(P.jsx)("span",{children:"Username:"}),Object(P.jsx)("input",{required:!0,type:"text",id:"username",onChange:function(e){return u(e.target.value)}})]}),Object(P.jsxs)("label",{htmlFor:"password",children:[Object(P.jsx)("span",{children:"Password:"}),Object(P.jsx)("input",{required:!0,type:"password",id:"password",onChange:function(e){return p(e.target.value)}})]}),Object(P.jsx)("div",{className:"submit text-center",children:Object(P.jsx)("input",{required:!0,className:"btn btn-primary mt-3",type:"submit",value:"Log In"})})]})]}):Object(P.jsxs)("div",{className:"main",children:[Object(P.jsx)("h1",{className:"text-center",children:"Crea account"}),e.errorMessage&&Object(P.jsx)("div",{className:"alert alert-danger",children:e.errorMessage}),Object(P.jsxs)("form",{onSubmit:"signin"===i?w:S,children:[Object(P.jsxs)("label",{htmlFor:"username",children:[Object(P.jsx)("span",{children:"Username:"}),Object(P.jsx)("input",{minLength:1,required:!0,type:"text",id:"username",placeholder:"INSICURO",onChange:function(e){return u(e.target.value)}})]}),Object(P.jsxs)("label",{htmlFor:"password",children:[Object(P.jsx)("span",{children:"Password:"}),Object(P.jsx)("input",{minLength:1,required:!0,type:"password",id:"password",placeholder:"INSICURO",onChange:function(e){return p(e.target.value)}})]}),Object(P.jsxs)("label",{htmlFor:"accountType",children:[Object(P.jsx)("span",{children:"Tipo di account:"}),Object(P.jsxs)("select",{id:"accountType",value:f,onChange:function(e){var t;x("internal"===(t=e.target.value)?"internal":"external"===t?"external":"internal")},children:[Object(P.jsx)("option",{value:"internal",children:"internal"}),Object(P.jsx)("option",{value:"external",children:"external"})]})]}),"external"===f&&Object(P.jsxs)("label",{htmlFor:"clientId",children:["Id Cliente (nome azienda):",Object(P.jsx)("input",{required:!0,value:g,type:"text",id:"clientId",onChange:function(e){return y(e.target.value)}})]}),Object(P.jsx)("div",{className:"submit text-center",children:Object(P.jsx)("input",{required:!0,className:"btn btn-primary mt-3",type:"submit",value:"Sign Up"})})]})]}),Object(P.jsx)("div",{className:"auth-wrapper",children:Object(P.jsxs)("div",{className:"auth-box",children:[Object(P.jsxs)("div",{className:"auth-nav",children:[Object(P.jsx)("div",{className:"text-center auth-nav-item ".concat("signin"===i&&"active"),onClick:function(){e.nullError(),c("signin")},children:"Sign In"}),Object(P.jsx)("div",{className:"text-center auth-nav-item ".concat("signup"===i&&"active"),onClick:function(){e.nullError(),c("signup")},children:"Sign Up"})]}),t]})})},T=n(46),I=n.n(T);n(1502),n(1503);var z=function(e){return Object(P.jsx)("div",{className:"loader",children:Object(P.jsx)(I.a,{type:"Circles",color:"blue"})})},D=a.a.createContext(null),U=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(j.a)(this,n),(r=t.call(this,e)).nullError=function(){r.setState({errorMessage:""})},r.setUsernameAndPassword=function(e){r.setState({usernameAndPassword:e})},r.handleAuthSuccess=function(e){r.setState({loading:!1}),console.log("auth success"),console.log(e),r.setState({isAuthenticated:!0,user:e})},r.handleTokenReceived=function(e){localStorage.setItem("authToken",e),r.authenticate()},r.handleAuthFailure=function(e){if(r.setState({loading:!1}),e instanceof f&&r.state.usernameAndPassword)(t=r.state.usernameAndPassword,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=3;break}return r(new m("wrong_credentials")),e.abrupt("return");case 3:return a={method:"POST",body:JSON.stringify(t)},e.next=6,fetch("/api/authenticateWithUsernameAndPassword",a);case 6:if((i=e.sent).ok){e.next=16;break}return e.t0=C,e.next=11,i.text();case 11:e.t1=e.sent,e.t2=r,(0,e.t0)(e.t1,e.t2),e.next=21;break;case 16:return e.t3=n,e.next=19,i.text();case 19:e.t4=e.sent,(0,e.t3)(e.t4);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then(r.handleTokenReceived).catch(r.handleAuthFailure);else{if(e instanceof f&&!r.state.usernameAndPassword)return void console.log("No token was found and user has not provided credentials yet.");if(e instanceof m&&"token_expired"===e.message)return;if(e instanceof m&&"server_failure"===e.message)return void r.setState({errorMessage:"Errore nel server. Riprovare pi\xf9 tardi."});if(e instanceof m&&"wrong_credentials"===e.message)return void r.setState({usernameAndPassword:void 0,errorMessage:"Credenziali rifiutate"});if(!(e instanceof x))throw e;r.setState({usernameAndPassword:void 0,errorMessage:""})}var t},r.handleSignupSuccess=function(e){r.setState({loading:!1}),e.token&&localStorage.setItem("authToken",e.token),r.setState({user:e,isAuthenticated:!0})},r.handleSignupFailure=function(e){if(r.setState({loading:!1}),e instanceof v&&"username_taken"===e.message)r.setState({errorMessage:"Questo username esiste gi\xe0."});else if(e instanceof v&&"invalid_json"===e.message)r.setState({errorMessage:"Errore. Controlla di aver inserito tutto correttamente"});else{if(!(e instanceof v&&"server_failure"===e.message))throw e;r.setState({errorMessage:"Errore nel server. Riprova pi\xf9 tardi."})}},r.authenticate=function(){r.setState({loading:!0}),new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=3;break}return t(N.currentUser),e.abrupt("return");case 3:if(r=localStorage.getItem("authToken")){e.next=9;break}return n(new f("no_token")),e.abrupt("return");case 9:return a={method:"POST",headers:[["authorization",r]]},e.next=12,fetch("/api/authenticateWithToken",a);case 12:if((i=e.sent).ok){e.next=22;break}return e.t0=C,e.next=17,i.text();case 17:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2),e.next=27;break;case 22:return e.t3=t,e.next=25,i.json();case 25:e.t4=e.sent,(0,e.t3)(e.t4);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then(r.handleAuthSuccess).catch(r.handleAuthFailure)},r.register=function(e){window.confirm("\n      Non usare username o password che utilizzi altrove! \n      Non sono tenuti in maniera sicura nel database!\n      ")&&(r.setState({loading:!0}),function(e){return new Promise((function(t,n){if(y)n(new v("username_taken"));else{var r={method:"POST",body:JSON.stringify(e)};fetch("/api/registerUser",r).then(function(){var e=Object(d.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ok){e.next=7;break}return e.next=3,r.text();case 3:a=e.sent,C(a,n),e.next=12;break;case 7:return e.t0=t,e.next=10,r.json();case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}))}(e).then(r.handleSignupSuccess).catch(r.handleSignupFailure))},r.alterUserFavorites=function(e,t){var n=r.state.user;if(n){var a,i,c;"add"===e?null===n||void 0===n||null===(a=n.favorites)||void 0===a||a.push(t):n.favorites=null===n||void 0===n||null===(i=n.favorites)||void 0===i?void 0:i.filter((function(e){return e!=t})),r.setState({user:n});var s=(null===(c=r.state.user)||void 0===c?void 0:c.token)?r.state.user.token:"",l={method:"POST",body:JSON.stringify({id:t,operation:e}),headers:[["authorization",s]]};fetch("/api/updateUserFavorites",l).then(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=7;break}return e.t0=alert,e.next=4,t.text();case 4:e.t1=e.sent,e.t2="could not update server favorites: "+e.t1,(0,e.t0)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.addUserApplicationLocally=function(e){var t,n=r.state.user;null===n||void 0===n||null===(t=n.applications)||void 0===t||t.push(e),r.setState({user:n})},r.state={isAuthenticated:!1,user:null,errorMessage:"",loading:!1},r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.authenticate()}},{key:"componentDidUpdate",value:function(e,t){var n,r,a,i;(null===(n=t.usernameAndPassword)||void 0===n?void 0:n.username)===(null===(r=this.state.usernameAndPassword)||void 0===r?void 0:r.username)&&(null===(a=this.state.usernameAndPassword)||void 0===a?void 0:a.password)===(null===(i=t.usernameAndPassword)||void 0===i?void 0:i.password)||this.authenticate()}},{key:"render",value:function(){return this.state.loading?Object(P.jsx)(z,{}):this.state.isAuthenticated&&this.state.user?Object(P.jsx)(D.Provider,{value:{user:this.state.user,editFavorites:this.alterUserFavorites,editApplications:this.addUserApplicationLocally},children:this.props.children}):Object(P.jsx)(A,{nullError:this.nullError,errorMessage:this.state.errorMessage,registerWithUsernameAndPassword:this.register,setUsernameAndPassword:this.setUsernameAndPassword})}}]),n}(a.a.Component),F=n(14),M=function(){return new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=4;break}return r=N.callBuilder(10),t(r),e.abrupt("return");case 4:return a=localStorage.getItem("authToken"),i={method:"GET",headers:[["authorization",a||""],["Content-Type","application/json"]]},e.next=9,fetch("/api/getJobCalls",i);case 9:if((c=e.sent).ok){e.next=19;break}return e.t0=C,e.next=14,c.text();case 14:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2),e.next=23;break;case 19:return e.next=21,c.json();case 21:s=e.sent,t(s.map((function(e){return e.timePosted=new Date(e.timePosted),e})));case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},J=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token?t.token:"",a={method:"POST",body:JSON.stringify(n),headers:[["authorization",r]]},e.next=4,fetch("/api/createJobCall",a);case 4:if(e.sent.ok){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",N.callBuilder(2)[0]);case 2:return r=t.token?t.token:"",a={method:"GET",headers:[["authorization",r]]},i="/api/getJobCallDetails/"+n,e.next=7,fetch(i,a);case 7:if(!(c=e.sent).ok){e.next=17;break}return e.next=11,c.json();case 11:return(s=e.sent).timePosted=new Date(s.timePosted),s.applications&&(console.log(s.applications),s.applications=s.applications.map((function(e){return Object(F.a)(Object(F.a)({},e),{},{timeApplied:new Date(e.timeApplied)})}))),e.abrupt("return",s);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",!0);case 2:return a=r.token?r.token:"",i={method:"POST",headers:[["authorization",a]],body:JSON.stringify({applicationId:n,newStatus:t})},e.next=6,fetch("/api/updateApplicationStatus",i);case 6:if(e.sent.ok){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",!0);case 2:return a=t.token?t.token:"",i={method:"POST",headers:[["authorization",a]],body:JSON.stringify({callId:n,seniority:r})},e.next=6,fetch("/api/createJobApplication",i);case 6:if(e.sent.ok){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",N.callBuilder(10));case 2:return n=t.token?t.token:"",r={method:"GET",headers:[["authorization",n]]},e.next=6,fetch("/api/getUserPosts",r);case 6:if((a=e.sent).ok){e.next=16;break}return e.t0=console,e.next=11,a.text();case 11:throw e.t1=e.sent,e.t0.log.call(e.t0,e.t1),new Error("failure");case 16:return e.next=18,a.json();case 18:return i=(i=e.sent).map((function(e){return Object(F.a)(Object(F.a)({},e),{},{timePosted:new Date(e.timePosted)})})),console.log(i),e.abrupt("return",i);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",N.applicationBuilder(10));case 2:return n=t.token?t.token:"",r={method:"GET",headers:[["authorization",n]]},e.next=6,fetch("/api/getUserApplications",r);case 6:if((a=e.sent).ok){e.next=11;break}throw new Error("failure");case 11:return e.next=13,a.json();case 13:return i=(i=e.sent).map((function(e){return Object(F.a)(Object(F.a)({},e),{},{timeApplied:new Date(e.timeApplied)})})),console.log(i),e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function H(e){var t=e.call.clientId&&"NOID"!==e.call.clientId?e.call.clientId:"";return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{className:"jumbotron",children:[Object(P.jsx)("h1",{className:"display-5",children:e.call.title}),Object(P.jsxs)("p",{className:"",children:[e.call.timePosted.toLocaleDateString()," - "+t]}),Object(P.jsx)("hr",{className:"my-4"}),e.call.description.split("\n").map((function(e){return Object(P.jsx)("p",{className:"lead",children:e},e)}))]})})}function Q(e){var t=e.call.applications,n=Object(r.useState)(""),a=Object(E.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(!1),l=Object(E.a)(s,2),o=l[0],u=l[1],d=function(t,n){y||(u(!0),L(t,n,e.user).then((function(t){t?e.refresh():c("Non \xe8 stato possibile aggiornare lo stato"),u(!1)})))};return o?Object(P.jsx)(z,{}):t?Object(P.jsxs)("div",{className:"call-view user-owner text-left p-3",children:[Object(P.jsx)(H,Object(F.a)({},e)),i&&Object(P.jsx)("div",{className:"alert alert-danger",children:i}),Object(P.jsx)("h2",{children:"Candidati"}),Object(P.jsxs)("table",{className:"table table-striped table-responsive-sm",children:[Object(P.jsx)("thead",{className:"thead-dark",children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Nome"}),Object(P.jsx)("th",{children:"Seniority"}),Object(P.jsx)("th",{children:"Data"}),Object(P.jsx)("th",{children:"Residenza"}),Object(P.jsx)("th",{children:"Status"}),Object(P.jsx)("th",{children:"Azioni"})]})}),Object(P.jsx)("tbody",{children:t.filter((function(e){return"rifiutato"!==e.applicationStatus})).map((function(e){return Object(P.jsxs)("tr",{style:{backgroundColor:"internal"===e.applicantType?"rgba(0, 135, 255, 0.7)":"rgba(255, 197, 0, 1)"},children:[Object(P.jsx)("td",{children:e.applicantName}),Object(P.jsxs)("td",{children:[w.name.jobTitle()," (",e.applicantSeniority,")"]}),Object(P.jsx)("td",{children:e.timeApplied.toLocaleDateString()}),Object(P.jsx)("td",{children:w.address.city()}),Object(P.jsx)("td",{style:{fontWeight:"bold"},children:e.applicationStatus}),Object(P.jsxs)("td",{className:"actions-tooltip",children:[Object(P.jsx)("span",{onClick:function(){return d("ricevuto",e.id)},children:"Ricevuto"}),Object(P.jsx)("span",{onClick:function(){return d("review",e.id)},children:"Review"}),Object(P.jsx)("span",{onClick:function(){return d("confermato",e.id)},children:"Confermato"}),Object(P.jsx)("span",{onClick:function(){return d("rifiutato",e.id)},children:"Rifiutato"})]})]},e.id)}))})]})]}):Object(P.jsx)("h1",{children:"No applications"})}function G(e){var t,n=null===(t=e.user.applications)||void 0===t?void 0:t.includes(e.call.id),a=Object(r.useState)(""),i=Object(E.a)(a,2),c=i[0],s=i[1],l=Object(r.useState)("junior"),o=Object(E.a)(l,2),j=o[0],b=o[1],p=Object(r.useState)(!1),h=Object(E.a)(p,2),O=h[0],f=h[1],x=Object(r.useContext)(D),m=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),f(!0),t.next=4,R(e.user,e.call.id,j);case 4:t.sent?(null===x||void 0===x||x.editApplications(e.call.id),f(!1),e.refresh()):(s("Non siamo riusciti ad effettuare la tua application"),f(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=n?Object(P.jsx)("div",{className:"alert alert-info",children:"Hai gi\xe0 mandato la tua candidatura a questa call."}):Object(P.jsxs)("form",{onSubmit:m,children:[Object(P.jsx)("section",{children:Object(P.jsxs)("label",{htmlFor:"seniority",children:["Seniority:",Object(P.jsxs)("select",{id:"seniority",value:j,onChange:function(e){return b(e.target.value)},children:[Object(P.jsx)("option",{value:"junior",children:"Junior"}),Object(P.jsx)("option",{value:"senior",children:"Senior"})]})]})}),Object(P.jsx)("input",{type:"submit",value:"Submit",className:"btn btn-primary"})]});return O?Object(P.jsx)(z,{}):Object(P.jsxs)("div",{className:"call-view user-not-owner text-left p-3",children:[Object(P.jsx)(H,Object(F.a)({},e)),c&&Object(P.jsx)("div",{className:"alert alert-danger",children:c}),v]})}n(1504);var W,V,K=function(e){var t,n=Object(r.useState)(""),a=Object(E.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(null),l=Object(E.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(!1),j=Object(E.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(!1),O=Object(E.a)(h,2),f=O[0],x=O[1],m=Object(r.useContext)(D),v=e.match.params.id;m&&(t=m.user),Object(r.useEffect)((function(){x(!0),t&&_(t,v).then((function(e){e?(console.log(e),u(e),x(!1)):(c("Non siamo riusciti a scaricare i dati"),x(!1))})).catch((function(){return c("Non siamo riusciti a scaricare i dati")}))}),[]),Object(r.useEffect)((function(){var e;(null===(e=t)||void 0===e?void 0:e.uid)===(null===o||void 0===o?void 0:o.poster)?p(!0):p(!1)}),[p,t,o]);var g=function(){x(!0),t&&_(t,v).then((function(e){e?(u(e),x(!1)):(c("Non siamo riusciti a scaricare i dati"),x(!1))})).catch((function(){return c("Non siamo riusciti a scaricare i dati")}))};return f?Object(P.jsx)(z,{}):i?Object(P.jsx)("div",{className:"alert alert-danger",children:i}):t&&o?b?Object(P.jsx)(Q,{refresh:g,user:t,call:o}):Object(P.jsx)(G,{refresh:g,user:t,call:o}):Object(P.jsx)("h1",{children:i})},X=n(50);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $(e,t){var n=e.title,a=e.titleId,i=Z(e,["title","titleId"]);return r.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,W||(W=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),V||(V=r.createElement("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"})))}var ee,te,ne=r.forwardRef($);n.p;function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ie(e,t){var n=e.title,a=e.titleId,i=ae(e,["title","titleId"]);return r.createElement("svg",re({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,ee||(ee=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),te||(te=r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})))}var ce,se,le=r.forwardRef(ie);n.p;function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function de(e,t){var n=e.title,a=e.titleId,i=ue(e,["title","titleId"]);return r.createElement("svg",oe({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,ce||(ce=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),se||(se=r.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})))}var je=r.forwardRef(de);n.p;n.p;var be=ne,pe=le,he=je;var Oe=function(e){var t,n=Object(r.useState)(!1),a=Object(E.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(""),l=Object(E.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(E.a)(d,2),b=j[0],p=j[1],h=Object(r.useContext)(D);if(h){var O=h.user;t=Object(P.jsxs)("div",{className:"add-call-form",children:[Object(P.jsx)("h1",{children:"Aggiungi call"}),Object(P.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={title:o,description:b};e.addCall(n),u(""),p(""),c(!1)},className:"add-call",children:[Object(P.jsx)("table",{cellPadding:1,children:Object(P.jsxs)("tbody",{children:[Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:Object(P.jsx)("label",{htmlFor:"title",children:"Titolo:"})}),Object(P.jsx)("td",{children:Object(P.jsx)("input",{type:"text",id:"title",value:o,onChange:function(e){var t=e.target.value;return u(t)}})})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:Object(P.jsx)("label",{htmlFor:"description",children:"Descrizione: "})}),Object(P.jsx)("td",{children:Object(P.jsx)("textarea",{cols:25,id:"description",value:b,onChange:function(e){var t=e.target.value;return p(t)}})})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:Object(P.jsx)("label",{htmlFor:"type",children:"Tipo: "})}),Object(P.jsx)("td",{children:Object(P.jsx)("input",{type:"text",readOnly:!0,value:O.accountType})})]}),"external"===O.accountType&&Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:Object(P.jsx)("label",{htmlFor:"clientid",children:"Codice cliente: "})}),Object(P.jsx)("td",{children:Object(P.jsx)("input",{type:"text",id:"clientid",readOnly:!0,value:O.clientId})})]})]})}),Object(P.jsx)("small",{className:"text-center mt-3",children:"Non \xe8 un bug che 'tipo' e 'codice cliente' non siano editabili. Il server prende queste due informazioni direttamente dall'oggetto utente autenticato."}),Object(P.jsxs)("div",{className:"buttons",children:[Object(P.jsx)("input",{type:"submit",value:"Submit",className:"btn btn-primary"}),Object(P.jsx)("button",{className:"btn btn-secondary",onClick:function(){u(""),p(""),c(!1)},children:"Annulla"})]})]})]})}return Object(P.jsxs)("div",{className:"call-card text-left",children:[Object(P.jsx)("div",{className:"call-taskbar",style:{backgroundColor:"grey"}}),Object(P.jsx)("div",{className:"call-add-box",onClick:function(){return c(!0)},children:Object(P.jsx)(he,{})}),i&&t]})};var fe=function(e){var t,n="internal"===e.type?"blue":"orange",a=Object(r.useContext)(D),i=null===a||void 0===a?void 0:a.user,c=null===a||void 0===a?void 0:a.editFavorites,l=null===i||void 0===i||null===(t=i.favorites)||void 0===t?void 0:t.includes(e.id);return Object(P.jsxs)("div",{className:"call-card text-left",children:[Object(P.jsxs)("div",{className:"call-taskbar",style:{backgroundColor:n},children:[e.type,Object(P.jsx)("div",{className:l?"bookmark-icon bookmark-selected":"bookmark-icon",onClick:function(){l&&i?c&&c("remove",e.id):c&&c("add",e.id)},children:Object(P.jsx)(be,{})})]}),Object(P.jsxs)("div",{className:"body p-3",children:[Object(P.jsx)("div",{children:Object(P.jsx)("h2",{children:e.title})}),"external"===e.type&&Object(P.jsx)("div",{children:Object(P.jsx)("span",{children:e.clientId})}),Object(P.jsx)("div",{children:Object(P.jsx)("span",{children:e.timePosted.toLocaleDateString()})})]}),Object(P.jsx)("div",{className:"button-apply",children:Object(P.jsx)("button",{className:"btn btn-primary",children:Object(P.jsx)(s.b,{to:"/call/".concat(e.id),children:"Apply"})})})]})};n(1508);var xe=function(e){var t,n=Object(r.useState)("title"),a=Object(E.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(""),l=Object(E.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(E.a)(d,2),b=j[0],p=j[1];switch(Object(r.useEffect)((function(){e.setQueryType(i),e.setQuery(o),e.setClientIdQuery(b)}),[i,o,b]),i){case"external":t=Object(P.jsxs)("div",{className:"filter-body",children:[Object(P.jsxs)("section",{children:[Object(P.jsx)("input",{type:"text",placeholder:"Cerca titolo",value:o,onChange:function(e){u(e.target.value)}}),Object(P.jsx)(pe,{})]}),Object(P.jsxs)("section",{children:[Object(P.jsx)("input",{type:"text",placeholder:"Cerca codice cliente",value:b,onChange:function(e){p(e.target.value)}}),Object(P.jsx)(pe,{})]})]});break;case"internal":case"title":t=Object(P.jsx)("div",{className:"filter-body",children:Object(P.jsxs)("section",{children:[" ",Object(P.jsx)("input",{type:"text",placeholder:"Cerca titolo",value:o,onChange:function(e){u(e.target.value)}}),Object(P.jsx)(pe,{})]})})}return Object(P.jsxs)("div",{className:"filter-bar text-left",children:[t,Object(P.jsxs)("select",{value:i,onChange:function(e){var t;c("internal"===(t=e.target.value)?"internal":"external"===t?"external":"title")},children:[Object(P.jsx)("option",{value:"internal",children:"Call interne"}),Object(P.jsx)("option",{value:"external",children:"Call esterne"}),Object(P.jsx)("option",{value:"title",children:"Cerca per titolo"})]})]})};function me(e,t,n){return n?n.includes(e.id)&&n.includes(t.id)||!n.includes(e.id)&&!n.includes(t.id)?e.timePosted<t.timePosted?1:-1:n.includes(e.id)?-1:1:0}var ve=function(){var e=Object(r.useState)([]),t=Object(E.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),c=Object(E.a)(i,2),s=c[0],l=c[1],o=Object(r.useState)([]),j=Object(E.a)(o,2),b=j[0],p=j[1],h=Object(r.useState)("title"),O=Object(E.a)(h,2),f=O[0],x=O[1],m=Object(r.useState)(""),v=Object(E.a)(m,2),g=v[0],w=v[1],S=Object(r.useState)(""),k=Object(E.a)(S,2),N=k[0],C=k[1],A=Object(r.useState)(!1),T=Object(E.a)(A,2),I=T[0],U=T[1],_=Object(r.useContext)(D),L=null===_||void 0===_?void 0:_.user,R=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=7;break}return e.next=5,J(L,t).catch((function(){return!1}));case 5:e.sent?M().then((function(e){a(e),p(e)})).catch((function(){l("Errore nel download delle call")})):l("Non siamo riusciti a creare la tua call");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){p("title"===f?n.filter((function(e){return e.title.includes(g)})):"external"===f?n.filter((function(e){var t;return"external"===e.type&&(null===(t=e.clientId)||void 0===t?void 0:t.includes(N))&&e.title.includes(g)})):"internal"===f?n.filter((function(e){return"internal"===e.type&&e.title.includes(g)})):n)}),[g,f,N,n]),Object(r.useEffect)((function(){U(!0),M().then((function(e){e=e.sort((function(e,t){return me(e,t,null===L||void 0===L?void 0:L.favorites)})),a(e),p(e),U(!1)})).catch((function(e){l("Error"),U(!1)}))}),[]),Object(r.useEffect)((function(){var e=n.sort((function(e,t){return me(e,t,null===L||void 0===L?void 0:L.favorites)}));a(Object(X.a)(e))}),[_]),I?Object(P.jsx)(z,{}):Object(P.jsxs)("div",{className:"dashboard",children:[s&&Object(P.jsx)("div",{className:"alert alert-danger",children:s}),Object(P.jsx)(xe,{setQuery:w,setQueryType:x,setClientIdQuery:C}),Object(P.jsxs)("div",{className:"calls",children:[s&&Object(P.jsx)("div",{className:"alert alert-danger",children:s}),g?Object(P.jsx)(P.Fragment,{}):Object(P.jsx)(Oe,{addCall:R}),b.map((function(e){return Object(P.jsx)(fe,Object(F.a)({},e),e.id)}))]})]})},ge=function(e){switch(e){case"confermato":return"green";case"review":return"orange";case"ricevuto":return"blue";case"rifiutato":return"red"}};n(1509);var ye=function(){var e=Object(r.useState)([]),t=Object(E.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),c=Object(E.a)(i,2),s=c[0],l=c[1],o=Object(r.useState)(!1),u=Object(E.a)(o,2),d=u[0],j=u[1],b=Object(r.useContext)(D);Object(r.useEffect)((function(){j(!0),b&&q(b.user).then((function(e){a(e),j(!1)})).catch((function(e){l("Non \xe8 stato possibile ottenere i tuoi post"),j(!1)}))}),[]);var p=n.map((function(e){var t,n,r;return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:null===(t=e.target)||void 0===t?void 0:t.title}),Object(P.jsx)("td",{children:e.timeApplied.toLocaleDateString()}),Object(P.jsx)("td",{children:null===(n=e.target)||void 0===n?void 0:n.type}),Object(P.jsx)("td",{style:{color:ge(e.applicationStatus)},children:e.applicationStatus}),Object(P.jsx)("td",{className:"no-linebreak",children:Object(P.jsx)("a",{href:"/call/".concat(null===(r=e.target)||void 0===r?void 0:r.id),children:"Vai a call"})})]},e.id)}));return d?Object(P.jsx)(z,{}):Object(P.jsxs)("div",{className:"user-applications text-left p-4",children:[Object(P.jsx)("h1",{className:"text-center mb-3",children:"Candidature"}),s&&Object(P.jsx)("div",{className:"alert alert-danger",children:s}),Object(P.jsxs)("table",{className:"table table-striped table-responsive-sm",children:[Object(P.jsx)("thead",{className:"thead-dark",children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Titolo"}),Object(P.jsx)("th",{children:"Data"}),Object(P.jsx)("th",{children:"Tipo"}),Object(P.jsx)("th",{children:"Stato"}),Object(P.jsx)("th",{children:"Link"})]})}),Object(P.jsx)("tbody",{children:n&&p})]})]})};n(1510);var we=function(){var e=Object(r.useState)([]),t=Object(E.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),c=Object(E.a)(i,2),s=c[0],l=c[1],o=Object(r.useState)(!1),u=Object(E.a)(o,2),d=u[0],j=u[1],b=Object(r.useContext)(D);Object(r.useEffect)((function(){j(!0),b&&B(b.user).then((function(e){a(e),j(!1)})).catch((function(e){l("Non \xe8 stato possibile ottenere i tuoi post"),j(!1)}))}),[]);var p=n.map((function(e){var t;return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:e.title}),Object(P.jsx)("td",{children:e.timePosted.toLocaleDateString()}),Object(P.jsx)("td",{children:null===(t=e.applications)||void 0===t?void 0:t.length}),Object(P.jsx)("td",{className:"no-linebreak",children:Object(P.jsx)("a",{href:"/call/".concat(e.id),children:"Vai a call"})})]},e.id)}));return d?Object(P.jsx)(z,{}):Object(P.jsxs)("div",{className:"user-posts text-left p-4",children:[Object(P.jsx)("h1",{className:"text-center mb-3",children:"Post"}),s&&Object(P.jsx)("div",{className:"alert alert-danger",children:s}),Object(P.jsxs)("table",{className:"table table-striped table-responsive-sm",children:[Object(P.jsx)("thead",{className:"thead-dark",children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Titolo"}),Object(P.jsx)("th",{children:"Data"}),Object(P.jsx)("th",{children:"Candidature"}),Object(P.jsx)("th",{children:"Link"})]})}),Object(P.jsx)("tbody",{children:n&&p})]})]})},Se=n(16),ke=n(1518);n(1511);var Ne=function(){var e=Object(r.useContext)(D);return Object(P.jsxs)(Se.a,{expand:"sm",bg:"light",children:[Object(P.jsx)(Se.a.Brand,{children:"Aron Winkler"}),Object(P.jsx)(Se.a.Toggle,{"aria-controls":"navbar-nav"}),Object(P.jsx)(Se.a.Collapse,{id:"navbar-nav",children:Object(P.jsxs)(ke.a,{className:"ml-auto mynav-nav",children:[Object(P.jsx)(Se.a.Text,{children:Object(P.jsx)(s.b,{to:"/",children:"Dashboard"})}),Object(P.jsx)(Se.a.Text,{children:Object(P.jsx)(s.b,{to:"/posts",children:"Post"})}),Object(P.jsx)(Se.a.Text,{children:Object(P.jsx)(s.b,{to:"/applications",children:"Candidature"})}),Object(P.jsx)(Se.a.Text,{children:Object(P.jsx)("a",{href:"#",children:"GitHub"})}),Object(P.jsx)(Se.a.Text,{children:Object(P.jsxs)("a",{href:"#",onClick:function(e){e.preventDefault(),localStorage.removeItem("authToken"),window.location.reload()},children:["Logout (",null===e||void 0===e?void 0:e.user.username,")"]})})]})})]})};var Ce=function(){return Object(P.jsx)(U,{children:Object(P.jsx)("div",{className:"App",children:Object(P.jsxs)(s.a,{children:[Object(P.jsx)(Ne,{}),Object(P.jsxs)(l.c,{children:[Object(P.jsx)(l.a,{exact:!0,path:"/",component:ve}),Object(P.jsx)(l.a,{path:"/call/:id",component:K}),Object(P.jsx)(l.a,{path:"/posts",component:we}),Object(P.jsx)(l.a,{path:"/applications",component:ye})]})]})})})};c.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(Ce,{})}),document.getElementById("root"))},56:function(e,t,n){},57:function(e,t,n){}},[[1515,1,2]]]);
//# sourceMappingURL=main.de2d3e71.chunk.js.map
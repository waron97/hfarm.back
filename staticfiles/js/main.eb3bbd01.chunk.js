(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1479:function(e,t,n){},1481:function(e,t,n){},1487:function(e,t,n){},1488:function(e,t,n){},1489:function(e,t,n){},1490:function(e,t,n){},1494:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(25),c=n.n(i),s=(n(54),n(55),n(18)),l=n(7),o=(n(56),n(6)),u=n.n(o),d=n(9),j=n(19),b=n(45),h=n(20),p=n(22),f=n(26),O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(f.a)(Error)),x=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(f.a)(Error)),m=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(f.a)(Error)),v=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(f.a)(Error)),g=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return n}(Object(f.a)(Error)),y=n(58)(a.a),w=n(4),k={username:"Aron",token:"aabbcc",uid:66,clientId:"exampleclientId",favorites:[],accountType:"external"},S=function(e){for(var t=[],n=0;n<e;n++)t.push({id:n,poster:k.uid,title:w.name.jobTitle(),description:w.lorem.words(15),clientId:w.company.companyName(),type:w.random.arrayElement(["internal","external"]),timePosted:w.date.recent(),applications:[{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"rifiutato"},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"ricevuto"},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"review"},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"confermato"},{id:w.random.number(),applicantId:w.random.number(),applicantName:w.name.firstName(),applicantSeniority:w.random.arrayElement(["Junior","Senior"]),timeApplied:w.date.recent(),applicationStatus:"ricevuto"}]});return t},N={currentUser:k,callBuilder:S,applicationBuilder:function(e){for(var t=[],n=0;n<e;n++)t.push({applicantId:w.random.number(),applicantName:w.name.firstName(),applicationStatus:w.random.arrayElement(["ricevuto","confermato","rifiutato","review"]),id:w.random.number(),timeApplied:w.date.recent(),applicantSeniority:w.random.arrayElement(["junior","senior"]),target:S(1)[0]});return t}},C=function(e,t){switch(console.log(e),e){case"invalid_json":t(new v(e));break;case"existing_username":t(new v("username_taken"));break;case"server_failure":t(new g(e));break;case"no_token":t(new x(e));break;case"wrong_credentials":t(new m(e));break;case"must_be_post":throw new g("This should never emerge in prod. \n        There is a GET request that should be POST.")}},P=n(5),E=(n(1479),n(0));var A=function(e){var t,n=Object(r.useState)("signin"),a=Object(P.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(""),l=Object(P.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(P.a)(d,2),b=j[0],h=j[1],p=Object(r.useState)("internal"),f=Object(P.a)(p,2),O=f[0],x=f[1],m=Object(r.useState)(),v=Object(P.a)(m,2),g=v[0],y=v[1],w=function(t){t.preventDefault(),e.setUsernameAndPassword({username:o,password:b})},k=function(t){t.preventDefault(),e.registerWithUsernameAndPassword({username:o,password:b,type:O,clientId:g})};return t="signin"===i?Object(E.jsxs)("div",{className:"main",children:[Object(E.jsx)("h1",{className:"text-center",children:"Accedi"}),e.errorMessage&&Object(E.jsx)("div",{className:"alert alert-danger",children:e.errorMessage}),Object(E.jsxs)("form",{onSubmit:"signin"===i?w:k,children:[Object(E.jsxs)("label",{htmlFor:"username",children:["Username:"," ",Object(E.jsx)("input",{required:!0,type:"text",id:"username",onChange:function(e){return u(e.target.value)}})]}),Object(E.jsxs)("label",{htmlFor:"password",children:["Password:"," ",Object(E.jsx)("input",{required:!0,type:"password",id:"password",onChange:function(e){return h(e.target.value)}})]}),Object(E.jsx)("div",{className:"submit text-center",children:Object(E.jsx)("input",{required:!0,className:"btn btn-primary mt-3",type:"submit",value:"Log In"})})]})]}):Object(E.jsxs)("div",{className:"main",children:[Object(E.jsx)("h1",{className:"text-center",children:"Crea account"}),e.errorMessage&&Object(E.jsx)("div",{className:"alert alert-danger",children:e.errorMessage}),Object(E.jsxs)("form",{onSubmit:"signin"===i?w:k,children:[Object(E.jsxs)("label",{htmlFor:"username",children:["Username:"," ",Object(E.jsx)("input",{required:!0,type:"text",id:"username",placeholder:"INSICURO",onChange:function(e){return u(e.target.value)}})]}),Object(E.jsxs)("label",{htmlFor:"password",children:["Password:"," ",Object(E.jsx)("input",{required:!0,type:"password",id:"password",placeholder:"INSICURO",onChange:function(e){return h(e.target.value)}})]}),Object(E.jsxs)("label",{htmlFor:"accountType",children:["Tipo di account:",Object(E.jsxs)("select",{id:"accountType",value:O,onChange:function(e){var t;x("internal"===(t=e.target.value)?"internal":"external"===t?"external":"internal")},children:[Object(E.jsx)("option",{value:"internal",children:"internal"}),Object(E.jsx)("option",{value:"external",children:"external"})]})]}),"external"===O&&Object(E.jsxs)("label",{htmlFor:"clientId",children:["Id Cliente (nome azienda):",Object(E.jsx)("input",{required:!0,value:g,type:"text",id:"clientId",onChange:function(e){return y(e.target.value)}})]}),Object(E.jsx)("div",{className:"submit text-center",children:Object(E.jsx)("input",{required:!0,className:"btn btn-primary mt-3",type:"submit",value:"Sign Up"})})]})]}),Object(E.jsx)("div",{className:"auth-wrapper",children:Object(E.jsxs)("div",{className:"auth-box",children:[Object(E.jsxs)("div",{className:"auth-nav",children:[Object(E.jsx)("div",{className:"text-center auth-nav-item ".concat("signin"===i&&"active"),onClick:function(){e.nullError(),c("signin")},children:"Sign In"}),Object(E.jsx)("div",{className:"text-center auth-nav-item ".concat("signup"===i&&"active"),onClick:function(){e.nullError(),c("signup")},children:"Sign Up"})]}),t]})})},T=a.a.createContext(null),I=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(j.a)(this,n),(r=t.call(this,e)).nullError=function(){r.setState({errorMessage:""})},r.setUsernameAndPassword=function(e){r.setState({usernameAndPassword:e})},r.handleAuthSuccess=function(e){console.log("auth success"),console.log(e),r.setState({isAuthenticated:!0,user:e})},r.handleTokenReceived=function(e){localStorage.setItem("authToken",e),r.authenticate()},r.handleAuthFailure=function(e){if(!(e instanceof O&&r.state.usernameAndPassword)){if(e instanceof O&&!r.state.usernameAndPassword)return void console.log("No token was found and user has not provided credentials yet.");if(e instanceof m&&"token_expired"===e.message)return;if(e instanceof m&&"server_failure"===e.message)return void r.setState({errorMessage:"Errore nel server. Riprovare pi\xf9 tardi."});if(e instanceof m&&"wrong_credentials"===e.message)return void r.setState({usernameAndPassword:void 0,errorMessage:"Credenziali rifiutate"});throw e}var t;(t=r.state.usernameAndPassword,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=3;break}return r(new m("wrong_credentials")),e.abrupt("return");case 3:return a={method:"POST",body:JSON.stringify(t)},e.next=6,fetch("/api/authenticateWithUsernameAndPassword",a);case 6:if((i=e.sent).ok){e.next=16;break}return e.t0=C,e.next=11,i.text();case 11:e.t1=e.sent,e.t2=r,(0,e.t0)(e.t1,e.t2),e.next=21;break;case 16:return e.t3=n,e.next=19,i.text();case 19:e.t4=e.sent,(0,e.t3)(e.t4);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then(r.handleTokenReceived).catch(r.handleAuthFailure)},r.handleSignupSuccess=function(e){e.token&&localStorage.setItem("authToken",e.token),r.setState({user:e,isAuthenticated:!0})},r.handleSignupFailure=function(e){if(e instanceof v&&"username_taken"===e.message)r.setState({errorMessage:"Questo username esiste gi\xe0."});else if(e instanceof v&&"invalid_json"===e.message)r.setState({errorMessage:"Errore. Controlla di aver inserito tutto correttamente"});else{if(!(e instanceof v&&"server_failure"===e.message))throw e;r.setState({errorMessage:"Errore nel server. Riprova pi\xf9 tardi."})}},r.authenticate=function(){new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=3;break}return t(N.currentUser),e.abrupt("return");case 3:if(r=localStorage.getItem("authToken")){e.next=9;break}return n(new O("no_token")),e.abrupt("return");case 9:return a={method:"POST",headers:[["authorization",r]]},e.next=12,fetch("/api/authenticateWithToken",a);case 12:if((i=e.sent).ok){e.next=22;break}return e.t0=C,e.next=17,i.text();case 17:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2),e.next=27;break;case 22:return e.t3=t,e.next=25,i.json();case 25:e.t4=e.sent,(0,e.t3)(e.t4);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then(r.handleAuthSuccess).catch(r.handleAuthFailure)},r.register=function(e){window.confirm("\n      Non usare username o password che utilizzi altrove! \n      Non sono tenuti in maniera sicura nel database!\n      ")&&function(e){return new Promise((function(t,n){if(y)n(new v("username_taken"));else{var r={method:"POST",body:JSON.stringify(e)};fetch("/api/registerUser",r).then(function(){var e=Object(d.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ok){e.next=7;break}return e.next=3,r.text();case 3:a=e.sent,C(a,n),e.next=12;break;case 7:return e.t0=t,e.next=10,r.json();case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}))}(e).then(r.handleSignupSuccess).catch(r.handleSignupFailure)},r.alterUserFavorites=function(e,t){var n=r.state.user;if(n){var a,i,c;"add"===e?null===n||void 0===n||null===(a=n.favorites)||void 0===a||a.push(t):n.favorites=null===n||void 0===n||null===(i=n.favorites)||void 0===i?void 0:i.filter((function(e){return e!=t})),r.setState({user:n});var s=(null===(c=r.state.user)||void 0===c?void 0:c.token)?r.state.user.token:"",l={method:"POST",body:JSON.stringify({id:t,operation:e}),headers:[["authorization",s]]};fetch("/api/updateUserFavorites",l).then(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=7;break}return e.t0=alert,e.next=4,t.text();case 4:e.t1=e.sent,e.t2="could not update server favorites: "+e.t1,(0,e.t0)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.addUserApplicationLocally=function(e){var t,n=r.state.user;null===n||void 0===n||null===(t=n.applications)||void 0===t||t.push(e),r.setState({user:n})},r.state={isAuthenticated:!1,user:null,errorMessage:""},r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.authenticate()}},{key:"componentDidUpdate",value:function(e,t){var n,r,a,i;(null===(n=t.usernameAndPassword)||void 0===n?void 0:n.username)===(null===(r=this.state.usernameAndPassword)||void 0===r?void 0:r.username)&&(null===(a=this.state.usernameAndPassword)||void 0===a?void 0:a.password)===(null===(i=t.usernameAndPassword)||void 0===i?void 0:i.password)||this.authenticate()}},{key:"render",value:function(){return this.state.isAuthenticated&&this.state.user?Object(E.jsx)(T.Provider,{value:{user:this.state.user,editFavorites:this.alterUserFavorites,editApplications:this.addUserApplicationLocally},children:this.props.children}):Object(E.jsx)(A,{nullError:this.nullError,errorMessage:this.state.errorMessage,registerWithUsernameAndPassword:this.register,setUsernameAndPassword:this.setUsernameAndPassword})}}]),n}(a.a.Component),D=n(16),U=function(){return new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=4;break}return r=N.callBuilder(10),t(r),e.abrupt("return");case 4:return a=localStorage.getItem("authToken"),i={method:"GET",headers:[["authorization",a||""],["Content-Type","application/json"]]},e.next=9,fetch("/api/getJobCalls",i);case 9:if((c=e.sent).ok){e.next=19;break}return e.t0=C,e.next=14,c.text();case 14:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2),e.next=23;break;case 19:return e.next=21,c.json();case 21:s=e.sent,t(s.map((function(e){return e.timePosted=new Date(e.timePosted),e})));case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},z=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token?t.token:"",a={method:"POST",body:JSON.stringify(n),headers:[["authorization",r]]},e.next=4,fetch("/api/createJobCall",a);case 4:if(e.sent.ok){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",N.callBuilder(2)[0]);case 2:return r=t.token?t.token:"",a={method:"GET",headers:[["authorization",r]]},i="/api/getJobCallDetails/"+n,e.next=7,fetch(i,a);case 7:if(!(c=e.sent).ok){e.next=17;break}return e.next=11,c.json();case 11:return(s=e.sent).timePosted=new Date(s.timePosted),s.applications&&(console.log(s.applications),s.applications=s.applications.map((function(e){return Object(D.a)(Object(D.a)({},e),{},{timeApplied:new Date(e.timeApplied)})}))),e.abrupt("return",s);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",!0);case 2:return a=r.token?r.token:"",i={method:"POST",headers:[["authorization",a]],body:JSON.stringify({applicationId:n,newStatus:t})},e.next=6,fetch("/api/updateApplicationStatus",i);case 6:if(e.sent.ok){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",!0);case 2:return a=t.token?t.token:"",i={method:"POST",headers:[["authorization",a]],body:JSON.stringify({callId:n,seniority:r})},e.next=6,fetch("/api/createJobApplication",i);case 6:if(e.sent.ok){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",N.callBuilder(10));case 2:return n=t.token?t.token:"",r={method:"GET",headers:[["authorization",n]]},e.next=6,fetch("/api/getUserPosts",r);case 6:if((a=e.sent).ok){e.next=16;break}return e.t0=console,e.next=11,a.text();case 11:throw e.t1=e.sent,e.t0.log.call(e.t0,e.t1),new Error("failure");case 16:return e.next=18,a.json();case 18:return i=(i=e.sent).map((function(e){return Object(D.a)(Object(D.a)({},e),{},{timePosted:new Date(e.timePosted)})})),console.log(i),e.abrupt("return",i);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",N.applicationBuilder(10));case 2:return n=t.token?t.token:"",r={method:"GET",headers:[["authorization",n]]},e.next=6,fetch("/api/getUserApplications",r);case 6:if((a=e.sent).ok){e.next=11;break}throw new Error("failure");case 11:return e.next=13,a.json();case 13:return i=(i=e.sent).map((function(e){return Object(D.a)(Object(D.a)({},e),{},{timeApplied:new Date(e.timeApplied)})})),console.log(i),e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){switch(e){case"confermato":return"green";case"review":return"orange";case"ricevuto":return"blue";case"rifiutato":return"red"}};function B(e){var t=e.call.applications,n=Object(r.useState)(""),a=Object(P.a)(n,2),i=a[0],c=a[1],s=function(t,n){y||M(t,n,e.user).then((function(t){t?e.refresh():c("Non \xe8 stato possibile aggiornare lo stato")}))};return t?Object(E.jsxs)("div",{className:"call-view user-owner text-left p-3",children:[Object(E.jsx)("h1",{children:e.call.title}),Object(E.jsx)("small",{children:e.call.timePosted.toLocaleDateString()}),Object(E.jsx)("p",{children:e.call.description}),i&&Object(E.jsx)("div",{className:"alert alert-danger",children:i}),Object(E.jsxs)("table",{className:"table table-striped",children:[Object(E.jsx)("thead",{className:"thead-dark",children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Nome"}),Object(E.jsx)("th",{children:"Seniority"}),Object(E.jsx)("th",{children:"Data"}),Object(E.jsx)("th",{children:"Status"}),Object(E.jsx)("th",{children:"CV"}),Object(E.jsx)("th",{children:"Azioni"})]})}),Object(E.jsx)("tbody",{children:t.map((function(e){return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:e.applicantName}),Object(E.jsx)("td",{children:e.applicantSeniority}),Object(E.jsx)("td",{children:e.timeApplied.toLocaleDateString()}),Object(E.jsx)("td",{style:{color:R(e.applicationStatus),fontWeight:"bold"},children:e.applicationStatus}),Object(E.jsx)("td",{children:Object(E.jsx)("a",{href:"#",children:"Scarica CV"})}),Object(E.jsxs)("td",{className:"actions-tooltip",children:[Object(E.jsx)("span",{onClick:function(){return s("ricevuto",e.id)},children:"Ricevuto"}),Object(E.jsx)("span",{onClick:function(){return s("review",e.id)},children:"Review"}),Object(E.jsx)("span",{onClick:function(){return s("confermato",e.id)},children:"Confermato"}),Object(E.jsx)("span",{onClick:function(){return s("rifiutato",e.id)},children:"Rifiutato"})]})]},e.id)}))})]})]}):Object(E.jsx)("h1",{children:"No applications"})}function q(e){var t,n=null===(t=e.user.applications)||void 0===t?void 0:t.includes(e.call.id),a=Object(r.useState)(""),i=Object(P.a)(a,2),c=i[0],s=i[1],l=Object(r.useState)("junior"),o=Object(P.a)(l,2),j=o[0],b=o[1],h=Object(r.useContext)(T),p=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,J(e.user,e.call.id,j);case 3:t.sent?(null===h||void 0===h||h.editApplications(e.call.id),e.refresh()):s("Non siamo riusciti ad effettuare la tua application");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=n?Object(E.jsx)("div",{className:"alert alert-info",children:"Hai gi\xe0 mandato la tua candidatura a questa call."}):Object(E.jsxs)("form",{onSubmit:p,children:[Object(E.jsx)("section",{children:Object(E.jsxs)("label",{htmlFor:"seniority",children:["Seniority:",Object(E.jsxs)("select",{id:"seniority",value:j,onChange:function(e){return b(e.target.value)},children:[Object(E.jsx)("option",{value:"junior",children:"Junior"}),Object(E.jsx)("option",{value:"senior",children:"Senior"})]})]})}),Object(E.jsx)("input",{type:"submit",value:"Submit",className:"btn btn-primary"})]});return Object(E.jsxs)("div",{className:"call-view user-not-owner text-left p-3",children:[Object(E.jsx)("h1",{children:e.call.title}),Object(E.jsx)("small",{children:e.call.timePosted.toLocaleDateString()}),Object(E.jsx)("p",{children:e.call.description}),c&&Object(E.jsx)("div",{className:"alert alert-danger",children:c}),f]})}n(1481);var H,Q,V=function(e){var t,n=Object(r.useState)(""),a=Object(P.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(null),l=Object(P.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(!1),j=Object(P.a)(d,2),b=j[0],h=j[1],p=Object(r.useContext)(T),f=e.match.params.id;p&&(t=p.user),Object(r.useEffect)((function(){t&&F(t,f).then((function(e){e?(console.log(e),u(e)):c("Non siamo riusciti a scaricare i dati")})).catch((function(){return c("Non siamo riusciti a scaricare i dati")}))}),[]),Object(r.useEffect)((function(){var e;(null===(e=t)||void 0===e?void 0:e.uid)===(null===o||void 0===o?void 0:o.poster)?h(!0):h(!1)}),[h,t,o]);var O=function(){t&&F(t,f).then((function(e){e?u(e):c("Non siamo riusciti a scaricare i dati")})).catch((function(){return c("Non siamo riusciti a scaricare i dati")}))};return i?Object(E.jsx)("div",{className:"alert alert-danger",children:i}):t&&o?b?Object(E.jsx)(B,{refresh:O,user:t,call:o}):Object(E.jsx)(q,{refresh:O,user:t,call:o}):Object(E.jsx)("h1",{children:i})},G=n(49);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function X(e,t){var n=e.title,a=e.titleId,i=K(e,["title","titleId"]);return r.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,H||(H=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),Q||(Q=r.createElement("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"})))}var Y,Z,$=r.forwardRef(X);n.p;function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ne(e,t){var n=e.title,a=e.titleId,i=te(e,["title","titleId"]);return r.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,Y||(Y=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),Z||(Z=r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})))}var re,ae,ie=r.forwardRef(ne);n.p;function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function le(e,t){var n=e.title,a=e.titleId,i=se(e,["title","titleId"]);return r.createElement("svg",ce({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,re||(re=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),ae||(ae=r.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})))}var oe=r.forwardRef(le);n.p;n.p;var ue=$,de=ie,je=oe;var be=function(e){var t,n=Object(r.useState)(!1),a=Object(P.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(""),l=Object(P.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(P.a)(d,2),b=j[0],h=j[1],p=Object(r.useContext)(T);if(p){var f=p.user;t=Object(E.jsxs)("div",{className:"add-call-form",children:[Object(E.jsx)("h1",{children:"Aggiungi call"}),Object(E.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={title:o,description:b};e.addCall(n),u(""),h(""),c(!1)},className:"add-call",children:[Object(E.jsx)("table",{cellPadding:1,children:Object(E.jsxs)("tbody",{children:[Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:Object(E.jsx)("label",{htmlFor:"title",children:"Titolo:"})}),Object(E.jsx)("td",{children:Object(E.jsx)("input",{type:"text",id:"title",value:o,onChange:function(e){var t=e.target.value;return u(t)}})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:Object(E.jsx)("label",{htmlFor:"description",children:"Descrizione: "})}),Object(E.jsx)("td",{children:Object(E.jsx)("textarea",{cols:25,id:"description",value:b,onChange:function(e){var t=e.target.value;return h(t)}})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:Object(E.jsx)("label",{htmlFor:"type",children:"Tipo: "})}),Object(E.jsx)("td",{children:Object(E.jsx)("input",{type:"text",readOnly:!0,value:f.accountType})})]}),"external"===f.accountType&&Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:Object(E.jsx)("label",{htmlFor:"clientid",children:"Codice cliente: "})}),Object(E.jsx)("td",{children:Object(E.jsx)("input",{type:"text",id:"clientid",readOnly:!0,value:f.clientId})})]})]})}),Object(E.jsx)("small",{className:"text-center mt-3",children:"Non \xe8 un bug che 'tipo' e 'codice cliente' non siano editabili. Il server prende queste due informazioni direttamente dall'oggetto utente autenticato."}),Object(E.jsxs)("div",{className:"buttons",children:[Object(E.jsx)("input",{type:"submit",value:"Submit",className:"btn btn-primary"}),Object(E.jsx)("button",{className:"btn btn-secondary",onClick:function(){u(""),h(""),c(!1)},children:"Annulla"})]})]})]})}return Object(E.jsxs)("div",{className:"call-card text-left",children:[Object(E.jsx)("div",{className:"call-taskbar",style:{backgroundColor:"grey"}}),Object(E.jsx)("div",{className:"call-add-box",onClick:function(){return c(!0)},children:Object(E.jsx)(je,{})}),i&&t]})};var he=function(e){var t,n="internal"===e.type?"blue":"orange",a=Object(r.useContext)(T),i=null===a||void 0===a?void 0:a.user,c=null===a||void 0===a?void 0:a.editFavorites,l=null===i||void 0===i||null===(t=i.favorites)||void 0===t?void 0:t.includes(e.id);return Object(E.jsxs)("div",{className:"call-card text-left",children:[Object(E.jsxs)("div",{className:"call-taskbar",style:{backgroundColor:n},children:[e.type,Object(E.jsx)("div",{className:l?"bookmark-icon bookmark-selected":"bookmark-icon",onClick:function(){l&&i?c&&c("remove",e.id):c&&c("add",e.id)},children:Object(E.jsx)(ue,{})})]}),Object(E.jsxs)("div",{className:"body p-3",children:[Object(E.jsx)("div",{children:Object(E.jsx)("h2",{children:e.title})}),"external"===e.type&&Object(E.jsx)("div",{children:Object(E.jsx)("span",{children:e.clientId})}),Object(E.jsx)("div",{children:Object(E.jsx)("span",{children:e.timePosted.toLocaleDateString()})})]}),Object(E.jsx)("div",{className:"button-apply",children:Object(E.jsx)("button",{className:"btn btn-primary",children:Object(E.jsx)(s.b,{to:"/call/".concat(e.id),children:"Apply"})})})]})};n(1487);var pe=function(e){var t,n=Object(r.useState)("title"),a=Object(P.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(""),l=Object(P.a)(s,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(P.a)(d,2),b=j[0],h=j[1];switch(Object(r.useEffect)((function(){e.setQueryType(i),e.setQuery(o),e.setClientIdQuery(b)}),[i,o,b]),i){case"external":t=Object(E.jsxs)("div",{className:"filter-body",children:[Object(E.jsxs)("section",{children:[Object(E.jsx)("input",{type:"text",placeholder:"Cerca titolo",value:o,onChange:function(e){u(e.target.value)}}),Object(E.jsx)(de,{})]}),Object(E.jsxs)("section",{children:[Object(E.jsx)("input",{type:"text",placeholder:"Cerca codice cliente",value:b,onChange:function(e){h(e.target.value)}}),Object(E.jsx)(de,{})]})]});break;case"internal":case"title":t=Object(E.jsx)("div",{className:"filter-body",children:Object(E.jsxs)("section",{children:[" ",Object(E.jsx)("input",{type:"text",placeholder:"Cerca titolo",value:o,onChange:function(e){u(e.target.value)}}),Object(E.jsx)(de,{})]})})}return Object(E.jsxs)("div",{className:"filter-bar text-left",children:[t,Object(E.jsxs)("select",{value:i,onChange:function(e){var t;c("internal"===(t=e.target.value)?"internal":"external"===t?"external":"title")},children:[Object(E.jsx)("option",{value:"internal",children:"Call interne"}),Object(E.jsx)("option",{value:"external",children:"Call esterne"}),Object(E.jsx)("option",{value:"title",children:"Cerca per titolo"})]})]})};function fe(e,t,n){return n?n.includes(e.id)&&n.includes(t.id)||!n.includes(e.id)&&!n.includes(t.id)?e.timePosted<t.timePosted?1:-1:n.includes(e.id)?-1:1:0}var Oe=function(){var e=Object(r.useState)([]),t=Object(P.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),c=Object(P.a)(i,2),s=c[0],l=c[1],o=Object(r.useState)([]),j=Object(P.a)(o,2),b=j[0],h=j[1],p=Object(r.useState)("title"),f=Object(P.a)(p,2),O=f[0],x=f[1],m=Object(r.useState)(""),v=Object(P.a)(m,2),g=v[0],w=v[1],k=Object(r.useState)(""),S=Object(P.a)(k,2),N=S[0],C=S[1],A=Object(r.useContext)(T),I=null===A||void 0===A?void 0:A.user,F=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:if(!I){e.next=7;break}return e.next=5,z(I,t).catch((function(){return!1}));case 5:e.sent?U().then((function(e){a(e),h(e)})).catch((function(){l("Errore nel download delle call")})):l("Non siamo riusciti a creare la tua call");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){h("title"===O?n.filter((function(e){return e.title.includes(g)})):"external"===O?n.filter((function(e){var t;return"external"===e.type&&(null===(t=e.clientId)||void 0===t?void 0:t.includes(N))&&e.title.includes(g)})):"internal"===O?n.filter((function(e){return"internal"===e.type&&e.title.includes(g)})):n)}),[g,O,N,n]),Object(r.useEffect)((function(){U().then((function(e){e=e.sort((function(e,t){return fe(e,t,null===I||void 0===I?void 0:I.favorites)})),a(e),h(e)})).catch((function(e){l("Error")}))}),[]),Object(r.useEffect)((function(){var e=n.sort((function(e,t){return fe(e,t,null===I||void 0===I?void 0:I.favorites)}));a(Object(G.a)(e))}),[A]),Object(E.jsxs)("div",{className:"dashboard",children:[s&&Object(E.jsx)("div",{className:"alert alert-danger",children:s}),Object(E.jsx)(pe,{setQuery:w,setQueryType:x,setClientIdQuery:C}),Object(E.jsxs)("div",{className:"calls",children:[s&&Object(E.jsx)("div",{className:"alert alert-danger",children:s}),Object(E.jsx)(be,{addCall:F}),b.map((function(e){return Object(E.jsx)(he,Object(D.a)({},e),e.id)}))]})]})};n(1488);var xe=function(){var e=Object(r.useState)([]),t=Object(P.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),c=Object(P.a)(i,2),s=c[0],l=c[1],o=Object(r.useContext)(T);Object(r.useEffect)((function(){o&&L(o.user).then((function(e){a(e)})).catch((function(e){l("Non \xe8 stato possibile ottenere i tuoi post")}))}),[]);var u=n.map((function(e){var t,n,r;return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:null===(t=e.target)||void 0===t?void 0:t.title}),Object(E.jsx)("td",{children:e.timeApplied.toLocaleDateString()}),Object(E.jsx)("td",{children:null===(n=e.target)||void 0===n?void 0:n.type}),Object(E.jsx)("td",{children:e.applicationStatus}),Object(E.jsx)("td",{className:"no-linebreak",children:Object(E.jsx)("a",{href:"/call/".concat(null===(r=e.target)||void 0===r?void 0:r.id),children:"Vai a call"})})]},e.id)}));return Object(E.jsxs)("div",{className:"user-applications text-left p-4",children:[Object(E.jsx)("h1",{className:"text-center mb-3",children:"Candidature"}),s&&Object(E.jsx)("div",{className:"alert alert-danger",children:s}),Object(E.jsxs)("table",{className:"table table-striped table-responsive-sm",children:[Object(E.jsx)("thead",{className:"thead-dark",children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Titolo"}),Object(E.jsx)("th",{children:"Data"}),Object(E.jsx)("th",{children:"Tipo"}),Object(E.jsx)("th",{children:"Stato"}),Object(E.jsx)("th",{children:"Link"})]})}),Object(E.jsx)("tbody",{children:n&&u})]})]})};n(1489);var me=function(){var e=Object(r.useState)([]),t=Object(P.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),c=Object(P.a)(i,2),s=c[0],l=c[1],o=Object(r.useContext)(T);Object(r.useEffect)((function(){o&&_(o.user).then((function(e){a(e)})).catch((function(e){l("Non \xe8 stato possibile ottenere i tuoi post")}))}),[]);var u=n.map((function(e){var t;return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:e.title}),Object(E.jsx)("td",{children:e.timePosted.toLocaleDateString()}),Object(E.jsx)("td",{children:null===(t=e.applications)||void 0===t?void 0:t.length}),Object(E.jsx)("td",{className:"no-linebreak",children:Object(E.jsx)("a",{href:"/call/".concat(e.id),children:"Vai a call"})})]},e.id)}));return Object(E.jsxs)("div",{className:"user-posts text-left p-4",children:[Object(E.jsx)("h1",{className:"text-center mb-3",children:"Post"}),s&&Object(E.jsx)("div",{className:"alert alert-danger",children:s}),Object(E.jsxs)("table",{className:"table table-striped table-responsive-sm",children:[Object(E.jsx)("thead",{className:"thead-dark",children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Titolo"}),Object(E.jsx)("th",{children:"Data"}),Object(E.jsx)("th",{children:"Candidature"}),Object(E.jsx)("th",{children:"Link"})]})}),Object(E.jsx)("tbody",{children:n&&u})]})]})},ve=n(14),ge=n(1497);n(1490);var ye=function(){return Object(E.jsxs)(ve.a,{expand:"sm",bg:"light",children:[Object(E.jsx)(ve.a.Brand,{children:"Aron Winkler"}),Object(E.jsx)(ve.a.Toggle,{"aria-controls":"navbar-nav"}),Object(E.jsx)(ve.a.Collapse,{id:"navbar-nav",children:Object(E.jsxs)(ge.a,{className:"ml-auto mynav-nav",children:[Object(E.jsx)(ve.a.Text,{children:Object(E.jsx)(s.b,{to:"/",children:"Dashboard"})}),Object(E.jsx)(ve.a.Text,{children:Object(E.jsx)(s.b,{to:"/posts",children:"Post"})}),Object(E.jsx)(ve.a.Text,{children:Object(E.jsx)(s.b,{to:"/applications",children:"Candidature"})}),Object(E.jsx)(ve.a.Text,{children:Object(E.jsx)("a",{href:"#",children:"GitHub"})}),Object(E.jsx)(ve.a.Text,{children:Object(E.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),localStorage.removeItem("authToken"),window.location.reload()},children:"Logout"})})]})})]})};var we=function(){return Object(E.jsx)(I,{children:Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)(s.a,{children:[Object(E.jsx)(ye,{}),Object(E.jsxs)(l.c,{children:[Object(E.jsx)(l.a,{exact:!0,path:"/",component:Oe}),Object(E.jsx)(l.a,{path:"/call/:id",component:V}),Object(E.jsx)(l.a,{path:"/posts",component:me}),Object(E.jsx)(l.a,{path:"/applications",component:xe})]})]})})})};c.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(we,{})}),document.getElementById("root"))},55:function(e,t,n){},56:function(e,t,n){}},[[1494,1,2]]]);
//# sourceMappingURL=main.eb3bbd01.chunk.js.map